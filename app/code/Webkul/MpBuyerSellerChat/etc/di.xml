<?xml version="1.0"?>
<!-- 
/**
 * Webkul Software.
 *
 * @category  Webkul
 * @package   Webkul_MpBuyerSellerChat
 * @author    Webkul
 * @copyright Copyright (c)  Webkul Software Private Limited (https://webkul.com)
 * @license   https://store.webkul.com/license.html
 */
 -->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <preference for="Webkul\MpBuyerSellerChat\Api\SaveMessageInterface" type="Webkul\MpBuyerSellerChat\Model\SaveMessage" />
    <preference for="Webkul\MpBuyerSellerChat\Api\SaveCustomerInterface" type="Webkul\MpBuyerSellerChat\Model\SaveCustomer" />
    <preference for="Webkul\MpBuyerSellerChat\Api\ChangeStatusInterface" type="Webkul\MpBuyerSellerChat\Model\ChangeStatus" />
    <preference for="Webkul\MpBuyerSellerChat\Api\LoadHistoryInterface" type="Webkul\MpBuyerSellerChat\Model\LoadHistory" />

    <preference for="Webkul\MpBuyerSellerChat\Api\Data\CustomerDataSearchResultInterface"
                type="Magento\Framework\Api\SearchResults" />

    <preference for="Webkul\MpBuyerSellerChat\Api\Data\CustomerDataInterface" type="Webkul\MpBuyerSellerChat\Model\CustomerData" />
    <preference for="Webkul\MpBuyerSellerChat\Api\CustomerDataRepositoryInterface" type="Webkul\MpBuyerSellerChat\Model\CustomerDataRepository" />
    <preference for="Webkul\MpBuyerSellerChat\Api\Data\CustomerBlockInterface" type="Webkul\MpBuyerSellerChat\Model\CustomerBlock" />

    <preference for="Webkul\MpBuyerSellerChat\Api\Data\MessageSearchResultInterface"
                type="Magento\Framework\Api\SearchResults" />
    <preference for="Webkul\MpBuyerSellerChat\Api\Data\MessageInterface" type="Webkul\MpBuyerSellerChat\Model\Message" />
    <preference for="Webkul\MpBuyerSellerChat\Api\MessageRepositoryInterface" type="Webkul\MpBuyerSellerChat\Model\MessageRepository" />

    <preference for="Magento\Customer\Model\ResourceModel\Customer" type="Webkul\MpBuyerSellerChat\Model\Customer\ResourceModel\Customer" />

    <type name="Magento\Framework\EntityManager\MetadataPool">
        <arguments>
            <argument name="metadata" xsi:type="array">
                <item name="Webkul\MpBuyerSellerChat\Api\Data\CustomerDataInterface" xsi:type="array">
                    <item name="entityTableName" xsi:type="string">marketplace_chat_customer_info</item>
                    <item name="identifierField" xsi:type="string">entity_id</item>
                </item>
            </argument>
        </arguments>
    </type>
    <type name="Magento\Framework\EntityManager\HydratorPool">
        <arguments>
            <argument name="hydrators" xsi:type="array">
                <item name="Webkul\MpBuyerSellerChat\Api\Data\CustomerDataInterface" xsi:type="string">Magento\Framework\EntityManager\AbstractModelHydrator</item>
            </argument>
        </arguments>
    </type>

    <type name="Magento\Framework\EntityManager\MetadataPool">
        <arguments>
            <argument name="metadata" xsi:type="array">
                <item name="Webkul\MpBuyerSellerChat\Api\Data\MessageInterface" xsi:type="array">
                    <item name="entityTableName" xsi:type="string">marketplace_chat_history</item>
                    <item name="identifierField" xsi:type="string">entity_id</item>
                </item>
            </argument>
        </arguments>
    </type>
    <type name="Magento\Framework\EntityManager\HydratorPool">
        <arguments>
            <argument name="hydrators" xsi:type="array">
                <item name="Webkul\MpBuyerSellerChat\Api\Data\MessageInterface" xsi:type="string">Magento\Framework\EntityManager\AbstractModelHydrator</item>
            </argument>
        </arguments>
    </type>

    <type name="Magento\Framework\EntityManager\MetadataPool">
        <arguments>
            <argument name="metadata" xsi:type="array">
                <item name="Webkul\MpBuyerSellerChat\Api\Data\CustomerBlockInterface" xsi:type="array">
                    <item name="entityTableName" xsi:type="string">marketplace_customer_blocked</item>
                    <item name="identifierField" xsi:type="string">entity_id</item>
                </item>
            </argument>
        </arguments>
    </type>
    <type name="Magento\Framework\EntityManager\HydratorPool">
        <arguments>
            <argument name="hydrators" xsi:type="array">
                <item name="Webkul\MpBuyerSellerChat\Api\Data\CustomerBlockInterface" xsi:type="string">Magento\Framework\EntityManager\AbstractModelHydrator</item>
            </argument>
        </arguments>
    </type>
    <type name="Magento\Framework\View\Element\UiComponent\DataProvider\CollectionFactory">
        <arguments>
            <argument name="collections" xsi:type="array">
                <item name="chat_history_listing_data_source" xsi:type="string">Webkul\MpBuyerSellerChat\Model\ResourceModel\Message\Grid\Collection</item>
            </argument>
        </arguments>
    </type>
    
    <type name="Webkul\MpBuyerSellerChat\Model\ResourceModel\Message\Grid\Collection">
        <arguments>
            <argument name="mainTable" xsi:type="string">marketplace_chat_history</argument>
            <argument name="eventPrefix" xsi:type="string">marketplace_history_grid_collection</argument>
            <argument name="eventObject" xsi:type="string">marketplace_history_collection</argument>
            <argument name="resourceModel" xsi:type="string">Webkul\MpBuyerSellerChat\Model\ResourceModel\Message</argument>
        </arguments>
    </type>

     <type name="Magento\Framework\View\Element\UiComponent\DataProvider\CollectionFactory">
        <arguments>
            <argument name="collections" xsi:type="array">
                <item name="chat_blocked_listing_data_source" xsi:type="string">Webkul\MpBuyerSellerChat\Model\ResourceModel\CustomerBlock\Grid\Collection</item>
            </argument>
        </arguments>
    </type>

    <type name="Webkul\MpBuyerSellerChat\Model\ResourceModel\CustomerBlock\Grid\Collection">
        <arguments>
            <argument name="mainTable" xsi:type="string">marketplace_customer_blocked</argument>
            <argument name="eventPrefix" xsi:type="string">marketplace_customer_blocked_grid_collection</argument>
            <argument name="eventObject" xsi:type="string">customer_blocked_collection</argument>
            <argument name="resourceModel" xsi:type="string">Webkul\MpBuyerSellerChat\Model\ResourceModel\CustomerBlock</argument>
        </arguments>
    </type>
</config>
