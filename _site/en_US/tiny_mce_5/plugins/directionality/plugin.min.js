!function(){"use strict";function t(n){return function(t){return typeof t===n}}function i(t){return function(){return t}}function n(t){return t}function o(){return a}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(t){return n=typeof(t=t),"string"==(null===t?"null":"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n);var n},c=t("boolean"),f=t("function"),l=t("number"),m=i(!"string"),d=i(!0),a={fold:function(t,n){return t()},isSome:m,isNone:d,getOr:n,getOrThunk:r,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:n,orThunk:r,map:o,each:function(){},bind:o,exists:m,forall:d,filter:function(){return a},toArray:function(){return[]},toString:i("none()")};function r(t){return t()}function s(t,n){for(var o=0,e=t.length;o<e;o++)n(t[o],o)}function g(t,n){t=t.dom;if(1!==t.nodeType)return!1;if(void 0!==t.matches)return t.matches(n);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(n);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(n);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function h(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}}function p(o){function t(){return r}function n(t){return t(o)}var e=i(o),r={fold:function(t,n){return n(o)},isSome:d,isNone:m,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(t){return p(t(o))},each:function(t){t(o)},bind:n,exists:n,forall:n,filter:function(t){return t(o)?r:a},toArray:function(){return[o]},toString:function(){return"some("+o+")"}};return r}var v={some:p,none:o,from:function(t){return null==t?a:p(t)}},y={fromHtml:function(t,n){n=(n||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return h(n.childNodes[0])},fromTag:function(t,n){return h((n||document).createElement(t))},fromText:function(t,n){return h((n||document).createTextNode(t))},fromDom:h,fromPoint:function(t,n,o){return v.from(t.dom.elementFromPoint(n,o)).map(h)}};function w(n){return function(t){return t.dom.nodeType===n}}function D(t,n){t.dom.removeAttribute(n)}function N(t){return y.fromDom(t.dom.host)}function T(t){return"rtl"===(n="direction",o=(t=t).dom,""!==(e=window.getComputedStyle(o).getPropertyValue(n))||E(t)?e:L(o,n))?"rtl":"ltr";var n,o,e}function S(t,i){var n=t.selection.getSelectedBlocks();0<n.length&&(s(n,function(t){var n,t=y.fromDom(t),e=O(n=t)&&"li"===n.dom.nodeName.toLowerCase(),r=(n=t,(e?function(t,n,o){for(var e=t.dom,r=f(o)?o:m;e.parentNode;){var e=e.parentNode,i=y.fromDom(e);if(g(i,n))return v.some(i);if(r(i))break}return v.none()}(n,"ol,ul"):v.some(n)).getOr(n));v.from(r.dom.parentNode).map(y.fromDom).filter(O).each(function(t){if(T(t)!==i){var n="dir",o=i;if(t=(t=r).dom,!(u(o)||c(o)||l(o)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,o+"")}else T(r)!==i&&D(r,"dir");e&&s(function(t,n){for(var o=function(t){return g(t,n)},e=function(t,n){for(var o=t.length,e=new Array(o),r=0;r<o;r++){var i=t[r];e[r]=n(i,r)}return e}(t.dom.childNodes,y.fromDom),r=o,i=[],u=0,c=e.length;u<c;u++){var f=e[u];r(f,u)&&i.push(f)}return i}(r,"li[dir]"),function(t){D(t,"dir")})})}),t.nodeChanged())}function b(o,e){return function(n){function t(t){t=y.fromDom(t.element);n.setActive(T(t)===e)}return o.on("NodeChange",t),function(){return o.off("NodeChange",t)}}}"undefined"==typeof window&&Function("return this;")();var O=w(1),A=w(3),C=w(9),M=w(11),k=f(Element.prototype.attachShadow)&&f(Node.prototype.getRootNode)?function(t){return y.fromDom(t.dom.getRootNode())}:function(t){return C(t)?t:y.fromDom(t.dom.ownerDocument)},E=function(t){var n,o,e,r,i=A(t)?t.dom.parentNode:t.dom;return null!=i&&null!==i.ownerDocument&&(r=i.ownerDocument,t=y.fromDom(i),t=k(t),(M(e=t)&&null!=e.dom.host?v.some(t):v.none()).fold(function(){return r.body.contains(i)},(n=E,o=N,function(t){return n(o(t))})))},L=function(t,n){return void 0!==t.style&&f(t.style.getPropertyValue)?t.style.getPropertyValue(n):""};e.add("directionality",function(t){var n,o;(n=t).addCommand("mceDirectionLTR",function(){S(n,"ltr")}),n.addCommand("mceDirectionRTL",function(){S(n,"rtl")}),(o=t).ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return o.execCommand("mceDirectionLTR")},onSetup:b(o,"ltr")}),o.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return o.execCommand("mceDirectionRTL")},onSetup:b(o,"rtl")})})}();