!function(){"use strict";function s(e){var n=e;return{get:function(){return n},set:function(e){n=e}}}function e(r){return function(e){return n=typeof(e=e),(null===e?"null":"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n)===r;var n}}function n(n){return function(e){return typeof e===n}}function u(e){return!(null==e)}function c(){}function f(e){return function(){return e}}function r(e){return e}var H=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=e("string"),W=e("array"),q=n("boolean"),l=n("function"),I=n("number");function t(){return d}var m=f(!1),i=f(!0),d={fold:function(e,n){return e()},isSome:m,isNone:i,getOr:r,getOrThunk:o,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:f(null),getOrUndefined:f(void 0),or:r,orThunk:o,map:t,each:c,bind:t,exists:m,forall:i,filter:function(){return d},toArray:function(){return[]},toString:f("none()")};function o(e){return e()}function j(e){function n(){r.get().each(e)}var r=s(O.none());return{clear:function(){n(),r.set(O.none())},isSet:function(){return r.get().isSome()},get:function(){return r.get()},set:function(e){n(),r.set(O.some(e))}}}function B(){return j(function(e){return e.unbind()})}function x(e,n){for(var r=e.length,t=new Array(r),o=0;o<r;o++){var i=e[o];t[o]=n(i,o)}return t}function E(e,n){for(var r=0,t=e.length;r<t;r++)n(e[r],r)}function h(e,n){for(var r=[],t=0,o=e.length;t<o;t++){var i=e[t];n(i,t)&&r.push(i)}return r}function V(e,n){for(var r=e,t=n,o=m,i=0,u=r.length;i<u;i++){var c=r[i];if(t(c,i))return O.some(c);if(o(c,i))break}return O.none()}function v(e,n){return-1!==e.indexOf(n)}function X(e){return void 0!==e.style&&l(e.style.getPropertyValue)}function g(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function p(r){function e(){return o}function n(e){return e(r)}var t=f(r),o={fold:function(e,n){return n(r)},isSome:i,isNone:m,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(e){return p(e(r))},each:function(e){e(r)},bind:n,exists:n,forall:n,filter:function(e){return e(r)?o:d},toArray:function(){return[r]},toString:function(){return"some("+r+")"}};return o}var O={some:p,none:t,from:function(e){return null==e?d:p(e)}},w=function(){return(w=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},_=Array.prototype.push,z=Object.keys,F={fromHtml:function(e,n){n=(n||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return g(n.childNodes[0])},fromTag:function(e,n){return g((n||document).createElement(e))},fromText:function(e,n){return g((n||document).createTextNode(e))},fromDom:g,fromPoint:function(e,n,r){return O.from(e.dom.elementFromPoint(n,r)).map(g)}};function y(n){return function(e){return e.dom.nodeType===n}}function U(e,n){var r=String(n).toLowerCase();return V(e,function(e){return e.search(r)})}function b(n){return function(e){return v(e,n)}}function $(e){return window.matchMedia(e).matches}function K(e,n){e=e.dom;if(1!==e.nodeType)return!1;if(void 0!==e.matches)return e.matches(n);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(n);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(n);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function T(e){return F.fromDom(e.dom.ownerDocument)}function k(e){var n,e=Ce(e);return pe(n=e)&&u(n.dom.host)?O.some(e):O.none()}function C(e){return F.fromDom(e.dom.host)}function Y(e,n){e=e.dom.getAttribute(n);return null===e?void 0:e}function G(e,n){e.dom.removeAttribute(n)}function D(e,n){for(var r=e.dom,t=n,o=z(t),i=0,u=o.length;i<u;i++){var c=o[i],s=t[c],l=r;if(!a(s))throw console.error("Invalid call to CSS.set. Property ",c,":: Value ",s,":: Element ",l),new Error("CSS value must be a string: "+s);X(l)&&l.style.setProperty(c,s)}}function J(e){function n(){return e.stopPropagation()}function r(){return e.preventDefault()}var t,o,i=F.fromDom(function(e){if(ke()&&u(e.target)){var n=F.fromDom(e.target);if(he(n)&&De(n)&&e.composed&&e.composedPath){n=e.composedPath();if(n)return 0<n.length?O.some(n[0]):O.none()}}return O.from(e.target)}(e).getOr(e.target));t=r,o=n;return{target:i,x:e.clientX,y:e.clientY,stop:n,prevent:r,kill:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t(o.apply(null,e))},raw:e}}function A(e){e=void 0===e?window:e;return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return L||(L=!0,de=me.apply(null,e)),de}().browser.isFirefox()?O.none():O.from(e.visualViewport)}function Q(e,n,r,t){return{x:e,y:n,width:r,height:t,right:e+r,bottom:n+t}}function Z(r,t,e){return A(e).map(function(e){function n(e){return t(J(e))}return e.addEventListener(r,n),{unbind:function(){return e.removeEventListener(r,n)}}}).getOrThunk(function(){return{unbind:c}})}function ee(e,n){e.fire("FullscreenStateChanged",{state:n})}function R(e){return e.getParam("fullscreen_native",!1,"boolean")}function ne(e){return e.dom===(void 0!==(e=T(e).dom).fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null)}function re(i,e,n){function r(o){return function(e){var n=Y(e,"style"),n=void 0===n?"no-styles":n.trim();if(n!==o){var r=e,t=N;if(r=r.dom,!(a(n)||q(n)||I(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",r),new Error("Attribute value was not simple");r.setAttribute(t,n+""),D(e,i.parseStyle(o))}}}u=function(e){return K(e,"*")};var t,o,u=h(function(e){for(var n=l(void 0)?void 0:m,r=e.dom,t=[];null!==r.parentNode&&void 0!==r.parentNode;){var o=r.parentNode,i=F.fromDom(o);if(t.push(i),!0===n(i))break;r=o}return t}(e),u),c=function(e){for(var n=[],r=0,t=e.length;r<t;++r){if(!W(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);_.apply(n,e[r])}return n}(x(u,function(e){return n="*:not(.tox-silver-sink)",t=function(e){return K(e,n)},h(O.from((r=e).dom.parentNode).map(F.fromDom).map(le).map(function(e){return h(e,function(e){return r.dom!==e.dom})}).getOr([]),t);var n,r,t})),s=(t="background-color",o=(n=n).dom,void 0!==(n=""!==(s=window.getComputedStyle(o).getPropertyValue(t))||Ae(n)?s:Re(o,t))&&""!==n?"background-color:"+n+"!important":"background-color:rgb(255,255,255)!important;");E(c,r("display:none!important;")),E(u,r(We+qe+s)),r((!0===Ie?"":We)+qe+s)(e)}function te(r,t){return function(n){function e(e){return n.setActive(e.state)}return n.setActive(null!==t.get()),r.on("FullscreenStateChanged",e),function(){return r.off("FullscreenStateChanged",e)}}}function oe(){return S(0,0)}function ie(e){function n(e){return function(){return r===e}}var r=e.current,e=e.version;return{current:r,version:e,isEdge:n("Edge"),isChrome:n("Chrome"),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(ye),isSafari:n("Safari")}}function ue(e){function n(e){return function(){return r===e}}var r=e.current,e=e.version;return{current:r,version:e,isWindows:n(Se),isiOS:n("iOS"),isAndroid:n(xe),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(Ee),isFreeBSD:n(Oe),isChromeOS:n(Fe)}}"undefined"==typeof window&&Function("return this;")();function S(e,n){return{major:e,minor:n}}function ce(){return ie({current:void 0,version:P.unknown()})}function se(){return ue({current:void 0,version:P.unknown()})}function le(e){return x(e.dom.childNodes,F.fromDom)}function ae(r,t){return{left:r,top:t,translate:function(e,n){return ae(r+e,t+n)}}}function fe(t,o){function i(n){n(m,"tox-fullscreen"),n(d,"tox-fullscreen"),n(h,"tox-fullscreen"),k(v).map(function(e){return C(e).dom}).each(function(e){n(e,"tox-fullscreen"),n(e,"tox-shadowhost")})}function e(){var r,e,n;y&&(r=t.dom,E(1!==(e=n=document).nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount?[]:x(n.querySelectorAll("["+N+"]"),F.fromDom),function(e){var n=Y(e,N);"no-styles"!==n?D(e,r.parseStyle(n)):G(e,"style"),G(e,N)})),i(je.removeClass),Be.unbind(),O.from(o.get()).each(function(e){return e.fullscreenChangeHandler.unbind()})}var n,r,u,c,s,l,a,f,m=document.body,d=document.documentElement,h=t.getContainer(),v=F.fromDom(h),g=k(n=F.fromDom(t.getElement())).map(C).getOrThunk(function(){var e=T(n).dom.body;if(null==e)throw new Error("Body is not available yet");return F.fromDom(e)}),p=o.get(),w=F.fromDom(t.getBody()),y=Ne.deviceType.isTouch(),b=h.style,S=t.iframeElement.style;p?(p.fullscreenChangeHandler.unbind(),R(t)&&ne(g)&&((s=T(g).dom).exitFullscreen?s.exitFullscreen():s.msExitFullscreen?s.msExitFullscreen():s.webkitCancelFullScreen&&s.webkitCancelFullScreen()),S.width=p.iframeWidth,S.height=p.iframeHeight,b.width=p.containerWidth,b.height=p.containerHeight,b.top=p.containerTop,b.left=p.containerLeft,s=p.scrollPos,window.scrollTo(s.x,s.y),o.set(null),ee(t,!1),e(),t.off("remove",e)):(p=T(g),s=void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",a=Pe,f=l=function(e){!R(t)||ne(g)||null===o.get()||fe(t,o)},(l=p).dom.addEventListener(p=s,s=function(e){a(e)&&f(J(e))},!1),l={unbind:function(t){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=o.concat(e);return t.apply(null,r)}}(Le,l,p,s,!1)},r={scrollPos:(p=window,p=(u=void 0===p?window:p).document,r=(p=void 0!==(p=F.fromDom(p))?p.dom:document).body.scrollLeft||p.documentElement.scrollLeft,p=p.body.scrollTop||p.documentElement.scrollTop,c=Me(r,p),A(u).fold(function(){var e=u.document.documentElement,n=e.clientWidth,e=e.clientHeight;return Q(c.left,c.top,n,e)},function(e){return Q(Math.max(e.pageLeft,c.left),Math.max(e.pageTop,c.top),e.width,e.height)})),containerWidth:b.width,containerHeight:b.height,containerTop:b.top,containerLeft:b.left,iframeWidth:S.width,iframeHeight:S.height,fullscreenChangeHandler:l},y&&re(t.dom,v,w),S.width=S.height="100%",b.width=b.height="",i(je.addClass),Be.bind(v),t.on("remove",e),o.set(r),R(t)&&((p=g.dom).requestFullscreen?p.requestFullscreen():p.msRequestFullscreen?p.msRequestFullscreen():p.webkitRequestFullScreen&&p.webkitRequestFullScreen()),ee(t,!0))}var me,de,L,he=y(1),ve=y(3),ge=y(9),pe=y(11),P={nu:S,detect:function(e,n){var r,t,n=String(n).toLowerCase();return 0===e.length?oe():(t=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t}}(e,r=n))?S(o(1),o(2)):{major:0,minor:0};function o(e){return Number(r.replace(t,"$"+e))}},unknown:oe},M=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,we={browsers:f([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return v(e,"edge/")&&v(e,"chrome")&&v(e,"safari")&&v(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,M],search:function(e){return v(e,"chrome")&&!v(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return v(e,"msie")||v(e,"trident")}},{name:"Opera",versionRegexes:[M,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:b("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:b("firefox")},{name:"Safari",versionRegexes:[M,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(v(e,"safari")||v(e,"mobile/"))&&v(e,"applewebkit")}}]),oses:f([{name:"Windows",search:b("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return v(e,"iphone")||v(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:b("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:b("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:b("linux"),versionRegexes:[]},{name:"Solaris",search:b("sunos"),versionRegexes:[]},{name:"FreeBSD",search:b("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:b("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},ye="Firefox",be=ie,Se=(f("Edge"),f("Chrome"),f("IE"),f("Opera"),f(ye),f("Safari"),"Windows"),xe="Android",Ee="Solaris",Oe="FreeBSD",Fe="ChromeOS",Te=ue,M=(f(Se),f("iOS"),f(xe),f("Linux"),f("OSX"),f(Ee),f(Oe),f(Fe),L=!(me=function(){return e=navigator.userAgent,l=O.from(navigator.userAgentData),u=$,s=we.browsers(),a=we.oses(),{browser:l=l.bind(function(e){for(var t=s,n=e.brands,r=0;r<n.length;r++){var o=function(n){var r=n.brand.toLowerCase();return V(t,function(e){return r===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(function(e){return{current:e.name,version:P.nu(parseInt(n.version,10),0)}})}(n[r]);if(o.isSome())return o}return O.none()}).orThunk(function(){return U(s,r=e).map(function(e){var n=P.detect(e.versionRegexes,r);return{current:e.name,version:n}});var r}).fold(ce,be),os:a=U(a,r=e).map(function(e){var n=P.detect(e.versionRegexes,r);return{current:e.name,version:n}}).fold(se,Te),deviceType:(l=l,n=e,u=u,t=(a=a).isiOS()&&!0===/ipad/i.test(n),o=a.isiOS()&&!t,i=(c=a.isiOS()||a.isAndroid())||u("(pointer:coarse)"),u=t||!o&&c&&u("(min-device-width:768px)"),c=o||c&&!u,l=l.isSafari()&&a.isiOS()&&!1===/safari/i.test(n),{isiPad:f(t),isiPhone:f(o),isTablet:f(u),isPhone:f(c),isTouch:f(i),isAndroid:a.isAndroid,isiOS:a.isiOS,isWebView:f(l),isDesktop:f(!c&&!u&&!l)})};var e,r,n,t,o,i,u,c,s,l,a}),l(Element.prototype.attachShadow)&&l(Node.prototype.getRootNode)),ke=f(M),Ce=M?function(e){return F.fromDom(e.dom.getRootNode())}:function(e){return ge(e)?e:T(e)},De=function(e){return u(e.dom.shadowRoot)},Ae=function(e){var n,r,t,o=ve(e)?e.dom.parentNode:e.dom;return null!=o&&null!==o.ownerDocument&&(t=o.ownerDocument,k(F.fromDom(o)).fold(function(){return t.body.contains(o)},(n=Ae,r=C,function(e){return n(r(e))})))},Re=function(e,n){return X(e)?e.style.getPropertyValue(n):""},Le=function(e,n,r,t){e.dom.removeEventListener(n,r,t)},Pe=i,Me=ae,M=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ne=tinymce.util.Tools.resolve("tinymce.Env"),He=tinymce.util.Tools.resolve("tinymce.util.Delay"),N="data-ephox-mobile-fullscreen-style",We="position:absolute!important;",qe="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Ie=Ne.os.isAndroid(),je=M.DOM,Be=A().fold(function(){return{bind:c,unbind:c}},function(n){r=j(c);var r,t=w(w({},r),{on:function(e){return r.get().each(e)}}),o=B(),i=B(),u=He.throttle(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame(function(){t.on(function(e){return D(e,{top:n.offsetTop+"px",left:n.offsetLeft+"px",height:n.height+"px",width:n.width+"px"})})})},50);return{bind:function(e){t.set(e),u(),o.set(Z("resize",u)),i.set(Z("scroll",u))},unbind:function(){t.on(function(){o.clear(),i.clear()}),t.clear()}}});H.add("fullscreen",function(e){var n,r,t,o,i,u=s(null);return e.inline||(r=u,(n=e).addCommand("mceFullScreen",function(){fe(n,r)}),(t=e).ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:c,onSetup:te(t,o=u)}),t.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:c,onSetup:te(t,o)}),e.addShortcut("Meta+Shift+F","","mceFullScreen")),i=u,{isFullscreen:function(){return null!==i.get()}};function c(){return t.execCommand("mceFullScreen")}})}();