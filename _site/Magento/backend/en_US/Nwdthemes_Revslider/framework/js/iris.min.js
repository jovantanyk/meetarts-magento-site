!function(h,t){function i(r,i){return r="top"===r?"top":"left",i=h.isArray(i)?i:Array.prototype.slice.call(arguments,1),"webkit"===u?(s=[],t="top"===(t=r)?"0% 0%,0% 100%,":"0% 100%,100% 100%,",e=c(e=i),h.each(e,function(r,i){s.push("color-stop("+parseFloat(i.stop)/100+", "+i.color+")")}),"-webkit-gradient(linear,"+t+s.join(",")+")"):d[u]+"linear-gradient("+r+", "+i.join(", ")+")";var t,e,s}function c(r){var o=[],a=[],i=[],t=r.length-1;return h.each(r,function(r,i){var t=i,e=!1,s=i.match(/1?[0-9]{1,2}%$/);s&&(t=i.replace(/\s?1?[0-9]{1,2}%$/,""),e=s.shift()),o.push(t),a.push(e)}),!1===a[0]&&(a[0]="0%"),!1===a[t]&&(a[t]="100%"),a=function r(i){var t,e,s,o,a=0,n=i.length-1,c=0,l=!1;if(i.length<=2||h.inArray(!1,i)<0)return i;for(;c<i.length-1;)l||!1!==i[c]?l&&!1!==i[c]&&(n=c,c=i.length):(a=c-1,l=!0),c++;for(e=n-a,o=parseInt(i[a].replace("%"),10),t=(parseFloat(i[n].replace("%"))-o)/e,c=a+1,s=1;c<n;)i[c]=o+s*t+"%",s++,c++;return r(i)}(a),h.each(a,function(r){i[r]={color:o[r],stop:a[r]}}),i}var o='<div class="iris-picker"><div class="iris-picker-inner"><div class="iris-square"><a class="iris-square-value" href="#"><span class="iris-square-handle ui-slider-handle"></span></a><div class="iris-square-inner iris-square-horiz"></div><div class="iris-square-inner iris-square-vert"></div></div><div class="iris-slider iris-strip"><div class="iris-slider-offset"></div></div></div></div>',a=navigator.userAgent.toLowerCase(),n="Microsoft Internet Explorer"===navigator.appName,l=n?parseFloat(a.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,p=n&&l<10,u=!1,d=["-moz-","-webkit-","-o-","-ms-"];p&&l<=7?(h.fn.iris=h.noop,h.support.iris=!1):(h.support.iris=!0,h.fn.gradient=function(){var r=arguments;return this.each(function(){p?function(r,e){var s,i,o,a,n;r="top"===r?"top":"left",e=h.isArray(e)?e:Array.prototype.slice.call(arguments,1),s="top"===r?0:1,i=h(this),o=e.length-1,a='<div class="iris-ie-gradient-shim" style="position:absolute;'+(1==s?"height":"width")+":100%;"+(1==s?"left":"top")+":%start%;"+(1==s?"right":"bottom")+':%end%;filter:%filter%;" data-color:"%color%"></div>',n="","static"===i.css("position")&&i.css({position:"relative"}),e=c(e),h.each(e,function(r,i){var t;return r!==o&&(r=e[r+1],void(i.stop!==r.stop&&(t=100-parseFloat(r.stop)+"%",i.octoHex=new Color(i.color).toIEOctoHex(),r.octoHex=new Color(r.color).toIEOctoHex(),r="progid:DXImageTransform.Microsoft.Gradient(GradientType="+s+", StartColorStr='"+i.octoHex+"', EndColorStr='"+r.octoHex+"')",n+=a.replace("%start%",i.stop).replace("%end%",t).replace("%filter%",r))))}),i.find(".iris-ie-gradient-shim").remove(),h(n).prependTo(i)}.apply(this,r):h(this).css("backgroundImage",i.apply(this,r))})},h.fn.raninbowGradient=function(r,i){var t,e,s;for(r=r||"top",t="hsl(%h%,"+(i=h.extend({},{s:100,l:50},i)).s+"%,"+i.l+"%)",e=0,s=[];e<=360;)s.push(t.replace("%h%",e)),e+=30;return this.each(function(){h(this).gradient(r,s)})},h.widget("a8c.iris",{options:{color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,border:!0,target:!1,width:200,palettes:!1},_color:"",_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:!1,_defaultHSLControls:{horiz:"s",vert:"l",strip:"h"},_defaultHSVControls:{horiz:"h",vert:"v",strip:"s"},_scale:{h:360,s:100,l:100,v:100},_create:function(){var t,e,r=this,i=r.element,s=r.options.color||i.val();!1===u&&(e="backgroundImage",p?u="filter":(t=h('<div id="iris-gradtest" />'),h.each(d,function(r,i){return t.css(e,i+"linear-gradient(top,#fff,#000)"),t.css(e).match("gradient")?(u=r,!1):void 0}),!1===u&&(t.css("background","-webkit-gradient(linear,0% 0%,0% 100%,from(#fff),to(#000))"),t.css(e).match("gradient"))&&(u="webkit"),t.remove())),i.is("input")?(r.picker=r.options.target?h(o).appendTo(r.options.target):h(o).insertAfter(i),r._addInputListeners(i)):(i.append(o),r.picker=i.find(".iris-picker")),n?9===l?r.picker.addClass("iris-ie-9"):l<=8&&r.picker.addClass("iris-ie-lt9"):a.indexOf("compatible")<0&&a.indexOf("khtml")<0&&a.match(/mozilla/)&&r.picker.addClass("iris-mozilla"),r.options.palettes&&r._addPalettes(),r._color=new Color(s).setHSpace(r.options.mode),r.options.color=r._color.toString(),r.controls={square:r.picker.find(".iris-square"),squareDrag:r.picker.find(".iris-square-value"),horiz:r.picker.find(".iris-square-horiz"),vert:r.picker.find(".iris-square-vert"),strip:r.picker.find(".iris-strip"),stripSlider:r.picker.find(".iris-strip .iris-slider-offset")},"hsv"===r.options.mode&&r._has("l",r.options.controls)?r.options.controls=r._defaultHSVControls:"hsl"===r.options.mode&&r._has("v",r.options.controls)&&(r.options.controls=r._defaultHSLControls),r.hue=r._color.h(),r.options.hide&&r.picker.hide(),r.options.border&&r.picker.addClass("iris-border"),r._initControls(),r.active="external",r._dimensions(),r._change()},_has:function(t,r){var e=!1;return h.each(r,function(r,i){return t===i?!(e=!0):void 0}),e},_addPalettes:function(){var t=h('<div class="iris-palette-container" />'),e=h('<a class="iris-palette" tabindex="0" />'),r=h.isArray(this.options.palettes)?this.options.palettes:this._palettes;this.picker.find(".iris-palette-container").length&&(t=this.picker.find(".iris-palette-container").detach().html("")),h.each(r,function(r,i){e.clone().data("color",i).css("backgroundColor",i).appendTo(t).height(10).width(10)}),this.picker.append(t)},_paint:function(){this._paintDimension("top","strip"),this._paintDimension("top","vert"),this._paintDimension("left","horiz")},_paintDimension:function(r,i){var t,e=this,s=e._color,o=e.options.mode,a=e._getHSpaceColor(),n=e.controls[i],c=e.options.controls;if(i!==e.active&&("square"!==e.active||"strip"===i))switch(c[i]){case"h":if("hsv"===o){switch(a=s.clone(),i){case"horiz":a[c.vert](100);break;case"vert":a[c.horiz](100);break;case"strip":a.setHSpace("hsl")}t=a.toHsl()}else t="strip"===i?{s:a.s,l:a.l}:{s:100,l:a.l};n.raninbowGradient(r,t);break;case"s":"hsv"===o?"vert"===i?t=[s.clone().a(0).s(0).toCSS("rgba"),s.clone().a(1).s(0).toCSS("rgba")]:"strip"===i?t=[s.clone().s(100).toCSS("hsl"),s.clone().s(0).toCSS("hsl")]:"horiz"===i&&(t=["#fff","hsl("+a.h+",100%,50%)"]):t="vert"===i&&"h"===e.options.controls.horiz?["hsla(0, 0%, "+a.l+"%, 0)","hsla(0, 0%, "+a.l+"%, 1)"]:["hsl("+a.h+",0%,50%)","hsl("+a.h+",100%,50%)"],n.gradient(r,t);break;case"l":t="strip"===i?["hsl("+a.h+",100%,100%)","hsl("+a.h+", "+a.s+"%,50%)","hsl("+a.h+",100%,0%)"]:["#fff","rgba(255,255,255,0) 50%","rgba(0,0,0,0) 50%","rgba(0,0,0,1)"],n.gradient(r,t);break;case"v":t="strip"===i?[s.clone().v(100).toCSS(),s.clone().v(0).toCSS()]:["rgba(0,0,0,0)","#000"],n.gradient(r,t)}},_getHSpaceColor:function(){return"hsv"===this.options.mode?this._color.toHsv():this._color.toHsl()},_dimensions:function(r){var i,t,e,s=this,o=s.options,a=s.controls.square,n=s.picker.find(".iris-strip"),c=o.border?o.width-20:o.width,l=(h.isArray(o.palettes)?o.palettes:s._palettes).length;return r&&(a.css("width",""),n.css("width",""),s.picker.css({width:"",height:""})),r=c*(parseFloat("77.5%")/100),c=c*(parseFloat("12%")/100),i=o.border?20+r:r,a.width(r).height(r),n.height(r).width(c),s.picker.css({width:o.width,height:i}),o.palettes?(e=(r-(l-1)*(t=2*r/100))/l,s.picker.find(".iris-palette").each(function(r){r=0===r?0:t;h(this).css({width:e,height:e,marginLeft:r})}),s.picker.css("paddingBottom",e+t),void n.height(e+t+r)):s.picker.css("paddingBottom","")},_addInputListeners:function(e){function r(r){var i=new Color(e.val()),t=e.val().replace(/^#/,"");e.removeClass("iris-error"),i.error?""!==t&&e.addClass("iris-error"):i.toString()===s._color.toString()||"keyup"===r.type&&t.match(/^[0-9a-fA-F]{3}$/)||s._setOption("color",i.toString())}var s=this;e.on("change",r).on("keyup",s._debounce(r,100)),s.options.hide&&e.one("focus",function(){s.show()})},_initControls:function(){var o=this,a=o.controls,r=a.square,t=o.options.controls,e=o._scale[t.strip];a.stripSlider.slider({orientation:"vertical",max:e,slide:function(r,i){o.active="strip","h"===t.strip&&(i.value=e-i.value),o._color[t.strip](i.value),o._change.apply(o,arguments)}}),a.squareDrag.draggable({containment:a.square.find(".iris-square-inner"),zIndex:1e3,cursor:"move",drag:function(r,i){o._squareDrag(r,i)},start:function(){r.addClass("iris-dragging"),h(this).addClass("ui-state-focus")},stop:function(){r.removeClass("iris-dragging"),h(this).removeClass("ui-state-focus")}}).on("mousedown mouseup",function(r){var i="ui-state-focus";r.preventDefault(),"mousedown"===r.type?(o.picker.find("."+i).removeClass(i).blur(),h(this).addClass(i).focus()):h(this).removeClass(i)}).on("keydown",function(r){var i=a.square,t=a.squareDrag,e=t.position(),s=o.options.width/100;switch(r.altKey&&(s*=10),r.keyCode){case 37:e.left-=s;break;case 38:e.top-=s;break;case 39:e.left+=s;break;case 40:e.top+=s;break;default:return!0}e.left=Math.max(0,Math.min(e.left,i.width())),e.top=Math.max(0,Math.min(e.top,i.height())),t.css(e),o._squareDrag(r,{position:e}),r.preventDefault()}),r.mousedown(function(r){var i;1===r.which&&h(r.target).is("div")&&(i=o.controls.square.offset(),i={top:r.pageY-i.top,left:r.pageX-i.left},r.preventDefault(),o._squareDrag(r,{position:i}),r.target=o.controls.squareDrag.get(0),o.controls.squareDrag.css(i).trigger(r))}),o.options.palettes&&o._paletteListeners()},_paletteListeners:function(){var r=this;r.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){r._color.fromCSS(h(this).data("color")),r.active="external",r._change()}).on("keydown.palette",".iris-palette",function(r){return 13!==r.keyCode&&32!==r.keyCode||(r.stopPropagation(),void h(this).click())})},_squareDrag:function(r,i){var t=this,e=t.options.controls,s=t._squareDimensions(),o=Math.round((s.h-i.position.top)/s.h*t._scale[e.vert]),s=t._scale[e.horiz]-Math.round((s.w-i.position.left)/s.w*t._scale[e.horiz]);t._color[e.horiz](s)[e.vert](o),t.active="square",t._change.apply(t,arguments)},_setOption:function(r,i){var t,e=this,s=e.options[r],o=!1;switch(e.options[r]=i,r){case"color":(i=""+i).replace(/^#/,""),(t=new Color(i).setHSpace(e.options.mode)).error?e.options[r]=s:(e._color=t,e.options.color=e.options[r]=e._color.toString(),e.active="external",e._change());break;case"palettes":o=!0,i?e._addPalettes():e.picker.find(".iris-palette-container").remove(),s||e._paletteListeners();break;case"width":o=!0;break;case"border":o=!0,e.picker[i?"addClass":"removeClass"]("iris-border");break;case"mode":case"controls":return s===i?void 0:(e.element,(s=e.options).hide=!e.picker.is(":visible"),e.destroy(),e.picker.remove(),h(e.element).iris(s))}o&&e._dimensions(!0)},_squareDimensions:function(r){var i=this.controls.square;return r!==t&&i.data("dimensions")?i.data("dimensions"):(this.controls.squareDrag,r={w:i.width(),h:i.height()},i.data("dimensions",r),r)},_isNonHueControl:function(r,i){return"square"===r&&"h"===this.options.controls.strip||"external"!==i&&("h"!==i||"strip"!==r)},_change:function(){var e=this,s=e.controls,o=e._getHSpaceColor(),r=["square","strip"],a=e.options.controls,i=a[e.active]||"external",t=e.hue;"strip"===e.active?r=[]:"external"!==e.active&&r.pop(),h.each(r,function(r,i){var t;if(i!==e.active)switch(i){case"strip":t="h"===a.strip?e._scale[a.strip]-o[a.strip]:o[a.strip],s.stripSlider.slider("value",t);break;case"square":t=e._squareDimensions(),t={left:o[a.horiz]/e._scale[a.horiz]*t.w,top:t.h-o[a.vert]/e._scale[a.vert]*t.h},e.controls.squareDrag.css(t)}}),o.h!==t&&e._isNonHueControl(e.active,i)&&e._color.h(t),e.hue=e._color.h(),e.options.color=e._color.toString(),e._inited&&e._trigger("change",{type:e.active},{color:e._color}),e.element.is(":input")&&!e._color.error&&(e.element.removeClass("iris-error"),e.element.val()!==e._color.toString())&&e.element.val(e._color.toString()),e._paint(),e._inited=!0,e.active=!1},_debounce:function(s,o,a){var n,c;return function(){var r=this,i=arguments,t=function(){n=null,a||(c=s.apply(r,i))},e=a&&!n;return clearTimeout(n),n=setTimeout(t,o),c=e?s.apply(r,i):c}},show:function(){this.picker.show()},hide:function(){this.picker.hide()},toggle:function(){this.picker.toggle()},color:function(r){return!0===r?this._color.clone():r===t?this._color.toString():void this.option("color",r)}}),h('<style id="iris-css">.iris-picker{display:block;position:relative}.iris-picker,.iris-picker *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input+.iris-picker{margin-top:4px}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:none;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:0;border:3px solid #fff;-ms-filter:"alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:0;margin:0;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px;width:auto;height:auto;background:transparent;border:0;border-radius:0}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}.iris-square-handle,.ui-slider-handle{border:0;outline:0}</style>').appendTo("head"))}(jQuery),function(r,h){function o(r,i){return this instanceof o?this._init(r,i):new o(r,i)}o.fn=o.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(r){switch(typeof r){case"object":return r.a!==h&&this.a(r.a),this[r.r!==h?"fromRgb":r.l!==h?"fromHsl":r.v!==h?"fromHsv":"noop"](r);case"string":return this.fromCSS(r);case"number":return this.fromInt(parseInt(r,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var r=new o(this.toInt()),i=["_alpha","_hSpace","_hsl","_hsv","error"],t=i.length-1;0<=t;t--)r[i[t]]=this[i[t]];return r},setHSpace:function(r){return this._hSpace="hsv"===r?r:"hsl",this},noop:function(){return this},fromCSS:function(r){var i,t=/^(rgb|hs(l|v))a?\(/;if(this.error=!1,(r=r.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,"")).match(t)&&r.match(/\)$/)){if((i=r.replace(/(\s|%)/g,"").replace(t,"").replace(/,?\);?$/,"").split(",")).length<3)return this._error();if(4===i.length&&(this.a(parseFloat(i.pop())),this.error))return this;for(var e=i.length-1;0<=e;e--)if(i[e]=parseInt(i[e],10),isNaN(i[e]))return this._error();return r.match(/^rgb/)?this.fromRgb({r:i[0],g:i[1],b:i[2]}):r.match(/^hsv/)?this.fromHsv({h:i[0],s:i[1],v:i[2]}):this.fromHsl({h:i[0],s:i[1],l:i[2]})}return this.fromHex(r)},fromRgb:function(r,i){return"object"!=typeof r||r.r===h||r.g===h||r.b===h?this._error():(this.error=!1,this.fromInt(parseInt((r.r<<16)+(r.g<<8)+r.b,10),i))},fromHex:function(r){return 3===(r=r.replace(/^#/,"").replace(/^0x/,"")).length&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),this.error=!/^[0-9A-F]{6}$/i.test(r),this.fromInt(parseInt(r,16))},fromHsl:function(r){var i,t,e,s,o;return"object"!=typeof r||r.h===h||r.s===h||r.l===h?this._error():(this._hsl=r,this._hSpace="hsl",s=r.h/360,o=r.s/100,r=r.l/100,0==o?i=t=e=r:(i=this.hue2rgb(o=2*r-(r=r<.5?r*(1+o):r+o-r*o),r,s+1/3),t=this.hue2rgb(o,r,s),e=this.hue2rgb(o,r,s-1/3)),this.fromRgb({r:255*i,g:255*t,b:255*e},!0))},fromHsv:function(r){var i,t,e,s,o,a,n,c,l;if("object"!=typeof r||r.h===h||r.s===h||r.v===h)return this._error();switch(this._hsv=r,this._hSpace="hsv",a=r.h/360,i=r.s/100,n=(t=r.v/100)*(1-i),c=t*(1-(a=6*a-(r=Math.floor(6*a)))*i),l=t*(1-(1-a)*i),r%6){case 0:e=t,s=l,o=n;break;case 1:e=c,s=t,o=n;break;case 2:e=n,s=t,o=l;break;case 3:e=n,s=c,o=t;break;case 4:e=l,s=n,o=t;break;case 5:e=t,s=n,o=c}return this.fromRgb({r:255*e,g:255*s,b:255*o},!0)},fromInt:function(r,i){return this._color=parseInt(r,10),isNaN(this._color)&&(this._color=0),16777215<this._color?this._color=16777215:this._color<0&&(this._color=0),i===h&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(r,i,t){return t<0&&(t+=1),1<t&&--t,t<1/6?r+6*(i-r)*t:t<.5?i:t<2/3?r+6*(i-r)*(2/3-t):r},toString:function(){var r=parseInt(this._color,10).toString(16);if(this.error)return"";if(r.length<6)for(var i=6-r.length-1;0<=i;i--)r="0"+r;return"#"+r},toCSS:function(r,i){switch(r=r||"hex",i=parseFloat(i||this._alpha),r){case"rgb":case"rgba":var t=this.toRgb();return i<1?"rgba( "+t.r+", "+t.g+", "+t.b+", "+i+" )":"rgb( "+t.r+", "+t.g+", "+t.b+" )";case"hsl":case"hsla":t=this.toHsl();return i<1?"hsla( "+t.h+", "+t.s+"%, "+t.l+"%, "+i+" )":"hsl( "+t.h+", "+t.s+"%, "+t.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var r,i=this.toRgb(),t=i.r/255,e=i.g/255,s=i.b/255,i=Math.max(t,e,s),o=Math.min(t,e,s),a=(i+o)/2;if(i===o)r=c=0;else{var n=i-o,c=.5<a?n/(2-i-o):n/(i+o);switch(i){case t:r=(e-s)/n+(e<s?6:0);break;case e:r=(s-t)/n+2;break;case s:r=(t-e)/n+4}r/=6}return{h:r=0===(r=Math.round(360*r))&&this._hsl.h!==r?this._hsl.h:r,s:c=0===(c=Math.round(100*c))&&this._hsl.s?this._hsl.s:c,l:Math.round(100*a)}},toHsv:function(){var r,i=this.toRgb(),t=i.r/255,e=i.g/255,s=i.b/255,i=Math.max(t,e,s),o=Math.min(t,e,s),a=i,n=i-o,c=0===i?0:n/i;if(i===o)r=c=0;else{switch(i){case t:r=(e-s)/n+(e<s?6:0);break;case e:r=(s-t)/n+2;break;case s:r=(t-e)/n+4}r/=6}return{h:r=0===(r=Math.round(360*r))&&this._hsv.h!==r?this._hsv.h:r,s:c=0===(c=Math.round(100*c))&&this._hsv.s?this._hsv.s:c,v:Math.round(100*a)}},toInt:function(){return this._color},toIEOctoHex:function(){var r=this.toString(),i=parseInt(255*this._alpha,10).toString(16);return"#"+(i=1===i.length?"0"+i:i)+r.replace(/^#/,"")},toLuminosity:function(){var r=this.toRgb();return.2126*Math.pow(r.r/255,2.2)+.7152*Math.pow(r.g/255,2.2)+.0722*Math.pow(r.b/255,2.2)},getDistanceLuminosityFrom:function(r){var i;if(r instanceof o)return i=this.toLuminosity(),(r=r.toLuminosity())<i?(i+.05)/(r+.05):(r+.05)/(i+.05);throw"getDistanceLuminosityFrom requires a Color object"},getMaxContrastColor:function(){var r=this.toLuminosity();return new o(.5<=r?"000000":"ffffff")},getReadableContrastingColor:function(r,i){if(!(!r instanceof o)){var t=i===h?5:i,e=r.getDistanceLuminosityFrom(this),i=r.getMaxContrastColor();if(i.getDistanceLuminosityFrom(r)<=t)return i;if(!(t<=e))for(var s=0===i.toInt()?-1:1;e<t&&(this.l(s,!0),e=this.getDistanceLuminosityFrom(r),0!==this._color)&&16777215!==this._color;);}return this},a:function(r){return r===h?this._alpha:(r=parseFloat(r),isNaN(r)?this._error():(this._alpha=r,this))},darken:function(r){return this.l(-(r=r||5),!0)},lighten:function(r){return this.l(r=r||5,!0)},saturate:function(r){return this.s(r=r||15,!0)},desaturate:function(r){return this.s(-(r=r||15),!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(r){return this.h(180+30*(r=r||1),!0)},getAnalog:function(r){return this.h(30*(r=r||1),!0)},getTetrad:function(r){return this.h(60*(r=r||1),!0)},getTriad:function(r){return this.h(120*(r=r||1),!0)},_partial:function(e){var s=t[e];return function(r,i){var t=this._spaceFunc("to",s.space);return r===h?t[e]:(!0===i&&(r=t[e]+r),s.mod&&(r%=s.mod),s.range&&(r=r<s.range[0]?s.range[0]:r>s.range[1]?s.range[1]:r),t[e]=r,this._spaceFunc("from",s.space,t))}},_spaceFunc:function(r,i,t){i=i||this._hSpace;return this[r+i.charAt(0).toUpperCase()+i.substr(1)](t)}};var i,t={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(i in t)t.hasOwnProperty(i)&&(o.fn[i]=o.fn._partial(i));"object"==typeof exports?module.exports=o:r.Color=o}(this);