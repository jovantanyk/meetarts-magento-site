!function(){"use strict";function M(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function U(t){return function(e){return typeof e===t}}function _(){}function l(e){return function(){return e}}function $(e){return e}function F(e,t){return e===t}function H(t){return function(e){return!t(e)}}function j(){return a}var K=tinymce.util.Tools.resolve("tinymce.PluginManager"),V=M("string"),f=M("object"),W=M("array"),Q=U("boolean"),X=U("function"),q=U("number"),i=l(!1),z=l(!0),a={fold:function(e,t){return e()},isSome:i,isNone:z,getOr:$,getOrThunk:Y,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:$,orThunk:Y,map:j,each:_,bind:j,exists:i,forall:z,filter:function(){return a},toArray:function(){return[]},toString:l("none()")};function Y(e){return e()}function m(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function p(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function g(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function Z(e,n,r){return p(e,function(e,t){r=n(r,e,t)}),r}function u(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return y.some(i);if(n(i,r))break}return y.none()}function h(e,t){return u(e,t,i)}function G(e,t){for(var n=m(e,t),r=[],o=0,i=n.length;o<i;++o){if(!W(n[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+n);oe.apply(r,n[o])}return r}function J(e){e=re.call(e,0);return e.reverse(),e}function ee(e,t){return 0<=t&&t<e.length?y.some(e[t]):y.none()}function te(e){return ee(e,0)}function v(e){return ee(e,e.length-1)}function ne(n){function e(){return o}function t(e){return e(n)}var r=l(n),o={fold:function(e,t){return t(n)},isSome:z,isNone:i,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return ne(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:a},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}var y={some:ne,none:j,from:function(e){return null==e?a:ne(e)}},re=Array.prototype.slice,oe=Array.prototype.push,ie=function(){return(ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ae(e,t){var n=String(t).toLowerCase();return h(e,function(e){return e.search(n)})}function n(e,t){return-1!==e.indexOf(t)}function e(t){return function(e){return n(e,t)}}function se(e){return window.matchMedia(e).matches}function ue(e,t){return e.dom===t.dom}function ce(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return be||(be=!0,Ce=Se.apply(null,e)),Ce}().browser.isIE()?(r=e.dom,o=t.dom,n=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(r.compareDocumentPosition(o)&n)):(r=e.dom)!==(o=t.dom)&&r.contains(o);var n,r,o}function de(e,t){for(var n=Be(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}function le(){return pe(0,0)}function fe(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isEdge:t("Edge"),isChrome:t("Chrome"),isIE:t("IE"),isOpera:t("Opera"),isFirefox:t(Le),isSafari:t("Safari")}}function me(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isWindows:t(De),isiOS:t("iOS"),isAndroid:t(xe),isOSX:t("OSX"),isLinux:t("Linux"),isSolaris:t(Ae),isFreeBSD:t(we),isChromeOS:t(ke)}}function r(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function pe(e,t){return{major:e,minor:t}}function ge(){return fe({current:void 0,version:S.unknown()})}function he(){return me({current:void 0,version:S.unknown()})}function ve(e,t){if(1!==(e=e.dom).nodeType)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}var ye,Se,Ce,be,S={nu:pe,detect:function(e,t){var n,r,t=String(t).toLowerCase();return 0===e.length?le():(r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,n=t))?pe(o(1),o(2)):{major:0,minor:0};function o(e){return Number(n.replace(r,"$"+e))}},unknown:le},Ne=(ye=/^\s+|\s+$/g,function(e){return e.replace(ye,"")}),t=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Oe={browsers:l([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return n(e,"edge/")&&n(e,"chrome")&&n(e,"safari")&&n(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,t],search:function(e){return n(e,"chrome")&&!n(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return n(e,"msie")||n(e,"trident")}},{name:"Opera",versionRegexes:[t,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:e("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:e("firefox")},{name:"Safari",versionRegexes:[t,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(n(e,"safari")||n(e,"mobile/"))&&n(e,"applewebkit")}}]),oses:l([{name:"Windows",search:e("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return n(e,"iphone")||n(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:e("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:e("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:e("linux"),versionRegexes:[]},{name:"Solaris",search:e("sunos"),versionRegexes:[]},{name:"FreeBSD",search:e("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:e("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},Le="Firefox",Te=fe,De=(l("Edge"),l("Chrome"),l("IE"),l("Opera"),l(Le),l("Safari"),"Windows"),xe="Android",Ae="Solaris",we="FreeBSD",ke="ChromeOS",Ee=me,C=(l(De),l("iOS"),l(xe),l("Linux"),l("OSX"),l(Ae),l(we),l(ke),be=!(Se=function(){return e=navigator.userAgent,c=y.from(navigator.userAgentData),a=se,u=Oe.browsers(),d=Oe.oses(),{browser:c=c.bind(function(e){for(var r=u,t=e.brands,n=0;n<t.length;n++){var o=function(t){var n=t.brand.toLowerCase();return h(r,function(e){return n===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(function(e){return{current:e.name,version:S.nu(parseInt(t.version,10),0)}})}(t[n]);if(o.isSome())return o}return y.none()}).orThunk(function(){return ae(u,n=e).map(function(e){var t=S.detect(e.versionRegexes,n);return{current:e.name,version:t}});var n}).fold(ge,Te),os:d=ae(d,n=e).map(function(e){var t=S.detect(e.versionRegexes,n);return{current:e.name,version:t}}).fold(he,Ee),deviceType:(c=c,t=e,a=a,r=(d=d).isiOS()&&!0===/ipad/i.test(t),o=d.isiOS()&&!r,i=(s=d.isiOS()||d.isAndroid())||a("(pointer:coarse)"),a=r||!o&&s&&a("(min-device-width:768px)"),s=o||s&&!a,c=c.isSafari()&&d.isiOS()&&!1===/safari/i.test(t),{isiPad:l(r),isiPhone:l(o),isTablet:l(a),isPhone:l(s),isTouch:l(i),isAndroid:d.isAndroid,isiOS:d.isiOS,isWebView:l(c),isDesktop:l(!s&&!a&&!c)})};var e,n,t,r,o,i,a,s,u,c,d}),{fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return r(t.childNodes[0])},fromTag:function(e,t){return r((t||document).createElement(e))},fromText:function(e,t){return r((t||document).createTextNode(e))},fromDom:r,fromPoint:function(e,t,n){return y.from(e.dom.elementFromPoint(t,n)).map(r)}}),Ie=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Pe=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),c=tinymce.util.Tools.resolve("tinymce.util.VK"),Be=Object.keys;function Re(e){return e.dom.nodeName.toLowerCase()}function Me(t){return function(e){return Rt(e)&&Re(e)===t}}function b(e,t){var r=e.dom;de(t,function(e,t){var n=r;if(!(V(e)||Q(e)||q(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")})}function Ue(e){return Z(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})}function _e(e){return y.from(e.dom.parentNode).map(C.fromDom)}function $e(e){return m(e.dom.childNodes,C.fromDom)}function Fe(e,t){e=e.dom.childNodes;return y.from(e[t]).map(C.fromDom)}function He(e){return Fe(e,0)}function je(e){return Fe(e,e.dom.childNodes.length-1)}function Ke(t,n){_e(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})}function N(e,t){e.dom.appendChild(t.dom)}function Ve(t,e){p(e,function(e){N(t,e)})}function We(e){e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)}function Qe(e){return C.fromDom(e.dom.cloneNode(!0))}function Xe(e,t){n=e,b(t=C.fromTag(t),Ue(n));var n=t;return Ke(e,n),Ve(n,$e(e)),We(e),n}function qe(t){return function(e){return e&&e.nodeName.toLowerCase()===t}}function o(t){return function(e){return e&&t.test(e.nodeName)}}function s(e){return e&&3===e.nodeType}function ze(e,t){return t&&e.schema.getTextBlockElements()[t.nodeName]}function Ye(e,t){return e&&e.nodeName in t}function O(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r}function Ze(e,t){return e.isChildOf(t,e.getRoot())}function Ge(e,t){var n,r,o,i,a=e.dom,s=e.schema.getBlockElements(),u=a.createFragment(),c=!1===(n=e.getParam("forced_root_block","p"))?"":!0===n?"p":n;if(c&&((o=a.create(c)).tagName===c.toUpperCase()&&a.setAttribs(o,e.getParam("forced_root_block_attrs",{})),Ye(t.firstChild,s)||u.appendChild(o)),t)for(;r=t.firstChild;){var d=r.nodeName;i||"SPAN"===d&&"bookmark"===r.getAttribute("data-mce-type")||(i=!0),Ye(r,s)?(u.appendChild(r),o=null):(c?(o||(o=a.create(c),u.appendChild(o)),o):u).appendChild(r)}return c?i||o.appendChild(a.create("br",{"data-mce-bogus":"1"})):u.appendChild(a.create("br")),u}function Je(e){Kt(e)&&Xe(e,"dd")}function et(t,e,n){p(n,"Indent"===e?Je:function(e){return u=t,jt(c=e)?Xe(c,"dt"):Kt(c)&&_e(c).each(function(e){var t=u,e=e.dom,n=c.dom,r=P.select('span[data-mce-type="bookmark"]',e),o=Ge(t,n),i=P.createRng();i.setStartAfter(n),i.setEndAfter(e);for(var a,s=(i=i.extractContents()).firstChild;s;s=s.firstChild)if("LI"===s.nodeName&&t.dom.isEmpty(s)){P.remove(s);break}t.dom.isEmpty(i)||P.insertAfter(i,e),P.insertAfter(o,e),O(t.dom,n.parentNode)&&(a=n.parentNode,k.each(r,function(e){a.parentNode.insertBefore(e,n.parentNode)}),P.remove(a)),P.remove(n),O(t.dom,e)&&P.remove(e)}),0;var u,c})}function tt(e,t){var n;return s(e)?{container:e,offset:t}:s(n=Ie.getNode(e,t))?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&s(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&s(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}}function L(e){var t=e.cloneRange(),n=tt(e.startContainer,e.startOffset),n=(t.setStart(n.container,n.offset),tt(e.endContainer,e.endOffset));return t.setEnd(n.container,n.offset),t}function T(e,t){t=t||e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",B(e,t))}function nt(e){var t,n=e.selection.getSelectedBlocks();return g((t=e,e=k.map(n,function(e){return t.dom.getParent(e,"li,dd,dt",B(t,e))||e}),Vt.unique(e)),$t)}function rt(e,t){return v(e.dom.getParents(t,"ol,ul",B(e,t)))}function ot(e,t,n){return void 0===n&&(n=F),e.exists(function(e){return n(e,t)})}function it(e,t,n){return e.isSome()&&t.isSome()?y.some(n(e.getOrDie(),t.getOrDie())):y.none()}function D(e,t,n){e.fire("ListMutation",{action:t,element:n})}function at(e,t){N(e.item,t.list)}function st(o,e,i){e=e.slice(0,i.depth);return v(e).each(function(e){r=i.itemAttributes,t=i.content,b(n=C.fromTag("li",o),r),Ve(n,t);var t,n,r=n;N((t=e).list,r),t.item=r,n=i,Re((t=e).list)!==n.listType&&(t.list=Xe(t.list,n.listType)),b(t.list,n.listAttributes)}),e}function ut(e,t,n){for(var e=function(e,t,n){for(var r,o=[],i=0;i<n;i++)o.push((r=t.listType,N((r={list:C.fromTag(r,r=e),item:C.fromTag("li",r)}).list,r.item),r));return o}(e,n,n.depth-t.length),r=e,o=1;o<r.length;o++)at(r[o-1],r[o]);for(var i=e,a=n,s=0;s<i.length-1;s++){var u=i[s].item.dom,c="list-style-type",d="none";if(!V(d))throw console.error("Invalid call to CSS.set. Property ",c,":: Value ",d,":: Element ",u),new Error("CSS value must be a string: "+d);void 0!==u.style&&X(u.style.getPropertyValue)&&u.style.setProperty(c,d)}return v(i).each(function(e){b(e.list,a.listAttributes),b(e.item,a.itemAttributes),Ve(e.item,a.content)}),n=e,it(v(t),te(n),at),t.concat(e)}function d(e){return ve(e,"OL,UL")}function ct(e){return He(e).exists(d)}function dt(e){return 0<e.depth}function lt(e){return e.isSelected}function ft(s){return p(s,function(a,e){function t(e){return e.depth===i&&!e.dirty}function n(e){return e.depth<i}var r,o,i=(r=s)[o=e].depth;u(J(r.slice(0,o)),t,n).orThunk(function(){return u(r.slice(o+1),t,n)}).fold(function(){var e,t,n,r,o,i;a.dirty&&(a.listAttributes=(e=a.listAttributes,n=function(e,t){return"start"!==t},r=t={},o=function(e,t){r[t]=e},i=_,de(e,function(e,t){(n(0,t)?o:i)(e,t)}),t))},function(e){a.listType=e.listType,a.listAttributes=ie({},e.listAttributes)})}),s}function mt(n,e){return m(ft(e),function(e){e=e.content,t=document.createDocumentFragment(),p(e,function(e){t.appendChild(e.dom)});var t,e=C.fromDom(t);return C.fromDom(Ge(n,e.dom))})}function pt(e,t){var t=ft(t),n=e.contentDocument;return te(Z(t,function(e,t){return(t.depth>e.length?ut:st)(n,e,t)},[])).map(function(e){return e.list}).toArray()}function gt(e,n){p(g(e,lt),function(e){var t=e;switch(n){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})}function ht(e,t){var n,o,i,r,a,s,u,c=m((l=rt(c=d=e,c.selection.getStart()),c=g(c.selection.getSelectedBlocks(),Ut),l=l.toArray().concat(c),Wt(d,l)),C.fromDom),d=m(g(nt(e),Ft),C.fromDom),l=!1;return(c.length||d.length)&&(n=e.selection.getBookmark(),i=t,p((c=c,u=m(nt(o=e),C.fromDom),r=it(h(u,H(ct)),h(J(u),H(ct)),function(e,t){return{start:e,end:t}}),a=!1,s={get:function(){return a},set:function(e){a=e}},m(c,function(e){return{sourceList:e,entries:Qt(0,r,s,e)}})),function(e){gt(e.entries,i);t=o;var t,n,r=G(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var s=e[i],u=t(s);u!==n&&(r.push(o),o=[]),n=u,o.push(s)}return 0!==o.length&&r.push(o),r}(e.entries,dt),function(e){return(te(e).exists(dt)?pt:mt)(t,e)});p(r,function(e){D(o,"Indent"===i?"IndentList":"OutdentList",e.dom)}),n=e.sourceList,p(r,function(e){Ke(n,e)}),We(e.sourceList)}),et(e,t,d),e.selection.moveToBookmark(n),e.selection.setRng(L(e.selection.getRng())),e.nodeChanged(),l=!0),l}function vt(e){return ht(e,"Indent")}function yt(e){return ht(e,"Outdent")}function x(e){ht(e,"Flatten")}function A(o){function e(e){var t,n=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];1===n.nodeType&&(t=R.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):R.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),i[e?"startContainer":"endContainer"]=n,i[e?"startOffset":"endOffset"]=r}var i={};return e(!0),o.collapsed||e(),i}function w(o){function e(e){var t,n=t=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,R.remove(t),!n.hasChildNodes())&&R.isBlock(n)&&n.appendChild(R.create("br")),o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=r)}e(!0),e();var t=R.createRng();return t.setStart(o.startContainer,o.startOffset),o.endContainer&&t.setEnd(o.endContainer,o.endOffset),L(t)}function St(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}}function Ct(e){return/\btox\-/.test(e.className)}function bt(e,t,n){function r(e){e=u(e.parents,E,Ht).filter(function(e){return e.nodeName===t&&!Ct(e)}).isSome();n(e)}return r({parents:e.dom.getParents(e.selection.getNode())}),e.on("NodeChange",r),function(){return e.off("NodeChange",r)}}function Nt(n,e){k.each(e,function(e,t){n.setAttribute(t,e)})}function Ot(e,t,n){var r,o=n["list-style-type"]||null;e.setStyle(t,"list-style-type",o),o=e,Nt(e=t,(r=n)["list-attributes"]),k.each(o.select("li",e),function(e){Nt(e,r["list-item-attributes"])})}function Lt(e,t,n,r){var o=t[n?"startContainer":"endContainer"],t=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(t,o.childNodes.length-1)]||o),!n&&I(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(ze(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o}function Tt(a,s,u){var e,t=a.selection.getRng(),c="LI",n=B(a,a.selection.getStart(!0)),d=a.dom;"false"!==d.getContentEditable(a.selection.getNode())&&("DL"===(s=s.toUpperCase())&&(c="DT"),e=A(t),t=function(n,e,r){for(var o,i=[],a=n.dom,t=Lt(n,e,!0,r),s=Lt(n,e,!1,r),u=[],c=t;c&&(u.push(c),c!==s);c=c.nextSibling);return k.each(u,function(e){var t;ze(n,e)?(i.push(e),o=null):a.isBlock(e)||I(e)?(I(e)&&a.remove(e),o=null):(t=e.nextSibling,Xt.isBookmarkNode(e)&&(E(t)||ze(n,t)||!t&&e.parentNode===r)?o=null:(o||(o=a.create("p"),e.parentNode.insertBefore(o,e),i.push(o)),o.appendChild(e)))}),i}(a,t,n),k.each(t,function(e){var t,n,r,o=e.previousSibling,i=e.parentNode;$t(i)||(o&&E(o)&&o.nodeName===s&&(i=u,d.getStyle(o,"list-style-type")===(null===(i=i?i["list-style-type"]:"")?"":i))?(t=o,e=d.rename(e,c),o.appendChild(e)):(t=d.create(s),e.parentNode.insertBefore(t,e),t.appendChild(e),e=d.rename(e,c)),n=d,r=e,k.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],function(e){var t;return n.setStyle(r,((t={})[e]="",t))}),Ot(d,t,u),qt(a.dom,t))}),a.selection.setRng(w(e)))}function Dt(e,t,n){return o=n,(r=t)&&o&&E(r)&&r.nodeName===o.nodeName&&(r=n,(o=e).getStyle(t,"list-style-type",!0)===o.getStyle(r,"list-style-type",!0))&&t.className===n.className;var r,o}function xt(e,t,n){var r,i,o,a,s,u,c,d=T(e),l=(r=T(l=e),l=l.selection.getSelectedBlocks(),r&&1===l.length&&l[0]===r?g(r.querySelectorAll("ol,ul,dl"),E):g(l,function(e){return E(e)&&r!==e})),n=f(n)?n:{};0<l.length?(i=e,l=l,a=t,s=n,(c=E(o=d))&&o.nodeName===a&&!Mt(s)?x(i):(Tt(i,a,s),u=A(i.selection.getRng()),c=c?function(e,t){for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||((n=n||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}([o],l):l,k.each(c,function(e){var t,n=i,r=a,o=s;(e=e).nodeName!==r?(t=n.dom.rename(e,r),Ot(n.dom,t,o),D(n,St(r),t)):(Ot(n.dom,e,o),D(n,St(r),e))}),i.selection.setRng(w(u)))):(o=t,l=n,(c=d)!==(u=e).getBody()&&(c?c.nodeName!==o||Mt(l)||Ct(c)?(t=A(u.selection.getRng()),Ot(u.dom,c,l),n=u.dom.rename(c,o),qt(u.dom,n),u.selection.setRng(w(t)),Tt(u,o,l),D(u,St(o),n)):x(u):(Tt(u,o,l),D(u,St(o),c))))}function At(e,t,n,r){var o=t.startContainer,t=t.startOffset;if(s(o)&&(n?t<o.data.length:0<t))return o;var i=e.schema.getNonEmptyElements();1===o.nodeType&&(o=Ie.getNode(o,t));var a=new Pe(o,r);for(n&&(t=e.dom,I(r=o))&&t.isBlock(r.nextSibling)&&!I(r.previousSibling)&&a.next();o=a[n?"next":"prev2"]();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(i[o.nodeName])return o;if(s(o)&&0<o.data.length)return o}}function wt(e,t){t=t.childNodes;return 1===t.length&&!E(t[0])&&e.isBlock(t[0])}function kt(t,e,n){var r,o=e.parentNode;if(Ze(t,e)&&Ze(t,n)){E(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&I(o.previousSibling)&&t.remove(o.previousSibling),(o=n.lastChild)&&I(o)&&e.hasChildNodes()&&t.remove(o),O(t,n,!0)&&t.$(n).empty();var i,a,o=t,s=e,u=n,c=wt(o,u)?u.firstChild:u;if(wt(u=o,a=s)&&u.remove(a.firstChild,!0),!O(o,s,!0))for(;i=s.firstChild;)c.appendChild(i);r&&n.appendChild(r),u=ce(C.fromDom(n),C.fromDom(e))?t.getParents(e,E,n):[],t.remove(e),p(u,function(e){O(t,e)&&e!==t.getRoot()&&t.remove(e)})}}function Et(e,t){return e.selection.isCollapsed()?function(u,c){var e,d,l,t=u.dom,n=u.selection,r=n.getStart(),r=B(u,r),f=t.getParent(n.getStart(),"LI",r);if(f)return(e=f.parentNode)===u.getBody()&&O(t,e)?1:(d=L(n.getRng()),(l=t.getParent(At(u,d,c,r),"LI",r))&&l!==f?(u.undoManager.transact(function(){var e,t,n,r,o,i,a,s;c?(a=d,t=l,(s=(e=u).dom).isEmpty(n=f)?(r=t,(o=e).dom.$(i=n).empty(),kt(o.dom,r,i),o.selection.setCursorLocation(i,0)):(r=A(a),kt(s,t,n),e.selection.setRng(w(r)))):f.parentNode.firstChild===f?yt(u):(o=u,i=f,a=l,s=A(d),kt(o.dom,i,a),i=w(s),o.selection.setRng(i))}),1):l||c||0!==d.startOffset||0!==d.endOffset?void 0:(u.undoManager.transact(function(){x(u)}),1))}(r=e,t=t)||function(r,o){var i,a=r.dom,e=r.selection.getStart(),s=B(r,e),u=a.getParent(e,a.isBlock,s);if(u&&a.isEmpty(u))return e=L(r.selection.getRng()),(i=a.getParent(At(r,e,o,s),"LI",s))?(r.undoManager.transact(function(){var e,t=u,n=(e=a).getParent(t.parentNode,e.isBlock,s);e.remove(t),n&&e.isEmpty(n)&&e.remove(n),qt(a,i.parentNode),r.selection.select(i,!0),r.selection.collapse(o)}),1):void 0}(r,t):(r=(n=e).selection.getStart(),t=B(n,r),(n.dom.getParent(r,"LI,DT,DD",t)||0<nt(n).length)&&(n.undoManager.transact(function(){var o,e;n.execCommand("Delete"),o=n.dom,e=n.getBody(),e=k.grep(o.select("ol,ul",e)),k.each(e,function(e){var t,n,r=o;"LI"===(n=(e=e).parentNode).nodeName&&n.firstChild===e&&((t=n.previousSibling)&&"LI"===t.nodeName?(t.appendChild(e),O(r,n)&&zt.remove(n)):zt.setStyle(n,"listStyleType","none")),E(n)&&(t=n.previousSibling)&&"LI"===t.nodeName&&t.appendChild(e)})}),1));var n,r}function It(e){return Z(m(J(Ne(e).split("")),function(e,t){e=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*e}),function(e,t){return e+t},0)}function Pt(t,n){return function(){var e=T(t);return e&&e.nodeName===n}}function Bt(r){r.addCommand("mceListProps",function(){var t,e,n=T(t=r);_t(n)&&t.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(n={start:t.dom.getAttrib(n,"start","1"),listStyleType:y.some(t.dom.getStyle(n,"list-style-type"))},e=parseInt(n.start,10),ot(n.listStyleType,"upper-alpha")?Yt(e):ot(n.listStyleType,"lower-alpha")?Yt(e).toLowerCase():n.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){!function(e){switch(/^[0-9]+$/.test(t=e)?2:/^[A-Z]+$/.test(t)?0:/^[a-z]+$/.test(t)?1:0<t.length?4:3){case 2:return y.some({listStyleType:y.none(),start:e});case 0:return y.some({listStyleType:y.some("upper-alpha"),start:It(e).toString()});case 1:return y.some({listStyleType:y.some("lower-alpha"),start:It(e).toString()});case 3:return y.some({listStyleType:y.none(),start:""});case 4:return y.none()}var t}(e.getData().start).each(function(e){t.execCommand("mceListUpdate",!1,{attrs:{start:"1"===e.start?"":e.start},styles:{"list-style-type":e.listStyleType.getOr("")}})}),e.close()}})})}function Rt(e){return 1===e.dom.nodeType}"undefined"==typeof window&&Function("return this;")();function Mt(e){return"list-style-type"in e}var t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),k=tinymce.util.Tools.resolve("tinymce.util.Tools"),E=o(/^(OL|UL|DL)$/),Ut=o(/^(OL|UL)$/),_t=qe("ol"),$t=o(/^(LI|DT|DD)$/),Ft=o(/^(DT|DD)$/),Ht=o(/^(TH|TD)$/),I=qe("br"),P=t.DOM,jt=Me("dd"),Kt=Me("dt"),Vt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),B=function(e,t){t=e.dom.getParents(t,"TD,TH");return 0<t.length?t[0]:e.getBody()},Wt=function(t,e){e=m(e,function(e){return rt(t,e).getOr(e)});return Vt.unique(e)},Qt=function(t,n,r,e){return G($e(e),function(e){return(d(e)?Qt:function(n,a,s,u){return He(u).filter(d).fold(function(){a.each(function(e){ue(e.start,u)&&s.set(!0)});r=u,o=n,i=s.get();var r,o,i,e=_e(r).filter(Rt).map(function(e){return{depth:o,dirty:!1,isSelected:i,content:(n=$e(t=r),m(je(t).exists(d)?n.slice(0,-1):n,Qe)),itemAttributes:Ue(r),listAttributes:Ue(e),listType:Re(e)};var t,n}),t=(a.each(function(e){ue(e.end,u)&&s.set(!1)}),je(u).filter(d).map(function(e){return Qt(n,a,s,e)}).getOr([]));return e.toArray().concat(t)},function(e){return Qt(n,a,s,e)})})(t+1,n,r,e)})},Xt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),R=t.DOM,qt=function(e,t){var n,r=t.nextSibling;if(Dt(e,t,r)){for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(Dt(e,t,r=t.previousSibling)){for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},zt=t.DOM,Yt=function(e){var t;return--e<0?"":(t=e%26,e=Math.floor(e/26),Yt(e)+String.fromCharCode("A".charCodeAt(0)+t))};K.add("lists",function(e){var n,t,r,i,o,a,s;return!1===e.hasPlugin("rtc",!0)?((o=e).getParam("lists_indent_on_tab",!0)&&(a=o).on("keydown",function(e){e.keyCode!==c.TAB||c.metaKeyPressed(e)||a.undoManager.transact(function(){(e.shiftKey?yt:vt)(a)&&e.preventDefault()})}),(s=o).on("keydown",function(e){e.keyCode===c.BACKSPACE?Et(s,!1)&&e.preventDefault():e.keyCode===c.DELETE&&Et(s,!0)&&e.preventDefault()}),(i=e).on("BeforeExecCommand",function(e){e=e.command.toLowerCase();"indent"===e?vt(i):"outdent"===e&&yt(i)}),i.addCommand("InsertUnorderedList",function(e,t){xt(i,"UL",t)}),i.addCommand("InsertOrderedList",function(e,t){xt(i,"OL",t)}),i.addCommand("InsertDefinitionList",function(e,t){xt(i,"DL",t)}),i.addCommand("RemoveList",function(){x(i)}),Bt(i),i.addCommand("mceListUpdate",function(e,t){var n,r,o;f(t)&&(r=t,o=T(n=i),n.undoManager.transact(function(){f(r.styles)&&n.dom.setStyles(o,r.styles),f(r.attrs)&&de(r.attrs,function(e,t){n.dom.setAttrib(o,t,e)})}))}),i.addQueryStateHandler("InsertUnorderedList",Pt(i,"UL")),i.addQueryStateHandler("InsertOrderedList",Pt(i,"OL")),i.addQueryStateHandler("InsertDefinitionList",Pt(i,"DL"))):Bt(e),(r=e).hasPlugin("advlist")||(r.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:u("InsertOrderedList"),onSetup:function(e){return bt(r,"OL",e.setActive)}}),r.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:u("InsertUnorderedList"),onSetup:function(e){return bt(r,"UL",e.setActive)}})),(n=e).ui.registry.addMenuItem("listprops",{text:"List properties...",icon:"ordered-list",onAction:function(){return n.execCommand("mceListProps")},onSetup:function(t){return bt(n,"OL",function(e){t.setDisabled(!e)})}}),n.ui.registry.addContextMenu("lists",{update:function(e){e=T(n,e);return _t(e)?["listprops"]:[]}}),t=e,{backspaceDelete:function(e){Et(t,e)}};function u(e){return function(){return r.execCommand(e)}}})}();